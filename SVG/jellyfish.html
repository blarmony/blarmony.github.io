<!--
---
title: "SVG Jellyfish Animation"
date: 2025-05-06
categories: ["svg"]
tags: ["animation", "interactive", "svg", "jellyfish"]
---
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Jellyfish Animation - Blarmony</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="../logo.png">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #0a4c7a 0%, #072a44 100%);
            height: 100vh;
            font-family: Arial, sans-serif;
        }
        
        /* Make the ocean container fixed and cover the entire viewport */
        .ocean {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            z-index: 0; /* Ensure it's behind other elements */
        }
        
        /* Make header transparent and position it above the ocean */
        header {
            background-color: transparent !important;
            position: relative;
            z-index: 10 !important; /* Higher z-index to appear above the ocean */
            box-shadow: none !important;
        }
        
        /* Style the menu for better visibility */
        .menu {
            background-color: rgba(51, 51, 51, 0.7) !important;
            backdrop-filter: blur(5px) !important;
        }
        
        /* Ensure hamburger menu is visible */
        .hamburger div {
            background-color: white !important;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.5) !important;
        }
        
        /* Ensure controls appear above the ocean background */
        .controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 20 !important; /* Higher than header to ensure visibility */
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .controls button {
            padding: 10px 15px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .controls button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .light-rays {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.3;
            pointer-events: none;
        }
        
        .light-ray {
            position: absolute;
            top: 0;
            width: 20px;
            height: 100%;
            background: linear-gradient(to bottom, rgba(163, 213, 255, 0.5), rgba(163, 213, 255, 0.1));
            transform: rotate(3deg);
        }
        
        .jellyfish {
            position: absolute;
            will-change: transform;
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3));
        }
        
        .bubble {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.4));
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
            opacity: 0.6;
            will-change: transform;
        }
        
        .seaweed {
            position: absolute;
            bottom: 0;
            transform-origin: bottom center;
        }
        
        .fish {
            position: absolute;
            will-change: transform;
        }
    </style>
</head>
<body>
    <script src="../menu.js"></script>
    <div class="ocean" id="ocean">
        <div class="light-rays" id="light-rays"></div>
        <div class="controls">
            <button id="add-jellyfish">Add Jellyfish</button>
            <button id="add-bubbles">More Bubbles</button>
        </div>
    </div>

    <script>
        // Configuration
        const config = {
            jellyfishCount: 7,
            bubbleCount: 30,
            seaweedCount: 8,
            fishCount: 5,
            lightRayCount: 8
        };
        
        // Colors for jellyfish
        const jellyfishColors = [
            { main: '#9966cc', accent: '#d4adfc' },  // Purple
            { main: '#66cccc', accent: '#adecfc' },  // Teal
            { main: '#cc6699', accent: '#fcadda' },  // Pink
            { main: '#66cc99', accent: '#adfcda' },  // Mint
            { main: '#cc9966', accent: '#fcdfad' },  // Orange
            { main: '#9999cc', accent: '#c9c9fc' },  // Lavender
            { main: '#cc66cc', accent: '#fcadfc' },  // Magenta
            { main: '#6699cc', accent: '#adccfc' }   // Blue
        ];
        
        // Create ocean elements
        const ocean = document.getElementById('ocean');
        const lightRaysContainer = document.getElementById('light-rays');
        
        // Create light rays
        function createLightRays() {
            for (let i = 0; i < config.lightRayCount; i++) {
                const ray = document.createElement('div');
                ray.className = 'light-ray';
                ray.style.left = `${Math.random() * 100}%`;
                ray.style.width = `${10 + Math.random() * 30}px`;
                ray.style.opacity = `${0.1 + Math.random() * 0.3}`;
                ray.style.transform = `rotate(${Math.random() * 6 - 3}deg)`;
                lightRaysContainer.appendChild(ray);
            }
        }
        
        // Create a jellyfish SVG with color customization
        function createJellyfish(color, size) {
            const jellyfish = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            jellyfish.setAttribute('viewBox', '0 0 400 500');
            jellyfish.setAttribute('width', size);
            jellyfish.setAttribute('height', size * 1.25);
            jellyfish.classList.add('jellyfish');
            
            // Add SVG defs
            const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
            
            // Create glow filter
            const filter = document.createElementNS('http://www.w3.org/2000/svg', 'filter');
            filter.setAttribute('id', `glow-${Math.random().toString(36).substring(2, 15)}`);
            filter.setAttribute('x', '-20%');
            filter.setAttribute('y', '-20%');
            filter.setAttribute('width', '140%');
            filter.setAttribute('height', '140%');
            
            const blur = document.createElementNS('http://www.w3.org/2000/svg', 'feGaussianBlur');
            blur.setAttribute('stdDeviation', '8');
            blur.setAttribute('result', 'blur');
            
            const composite = document.createElementNS('http://www.w3.org/2000/svg', 'feComposite');
            composite.setAttribute('in', 'SourceGraphic');
            composite.setAttribute('in2', 'blur');
            composite.setAttribute('operator', 'over');
            
            filter.appendChild(blur);
            filter.appendChild(composite);
            
            // Create pattern for jellyfish texture
            const pattern = document.createElementNS('http://www.w3.org/2000/svg', 'pattern');
            const patternId = `jellytexture-${Math.random().toString(36).substring(2, 15)}`;
            pattern.setAttribute('id', patternId);
            pattern.setAttribute('x', '0');
            pattern.setAttribute('y', '0');
            pattern.setAttribute('width', '20');
            pattern.setAttribute('height', '20');
            pattern.setAttribute('patternUnits', 'userSpaceOnUse');
            
            const patternPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            patternPath.setAttribute('d', 'M0,10 Q5,5 10,10 T20,10');
            patternPath.setAttribute('fill', 'none');
            patternPath.setAttribute('stroke', color.accent);
            patternPath.setAttribute('stroke-width', '0.5');
            patternPath.setAttribute('opacity', '0.3');
            
            pattern.appendChild(patternPath);
            
            defs.appendChild(filter);
            defs.appendChild(pattern);
            jellyfish.appendChild(defs);
            
            // Create jellyfish body group
            const bodyGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            bodyGroup.setAttribute('filter', `url(#${filter.id})`);
            
            // Main bell/dome
            const bell = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            bell.setAttribute('d', 'M200,150 C260,150 310,180 310,230 C310,250 300,270 290,290 C280,310 270,320 260,330 C250,340 240,345 230,350 C220,355 210,358 200,360 C190,358 180,355 170,350 C160,345 150,340 140,330 C130,320 120,310 110,290 C100,270 90,250 90,230 C90,180 140,150 200,150Z');
            bell.setAttribute('fill', color.main);
            bell.setAttribute('fill-opacity', '0.8');
            bell.setAttribute('stroke', color.accent);
            bell.setAttribute('stroke-width', '2');
            
            // Inner bell texture with pattern
            const innerBell = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            innerBell.setAttribute('d', 'M200,160 C255,160 300,185 300,230 C300,248 290,266 282,284 C272,302 264,312 254,320 C244,328 234,333 224,338 C214,343 205,346 200,347 C195,346 186,343 176,338 C166,333 156,328 146,320 C136,312 128,302 118,284 C110,266 100,248 100,230 C100,185 145,160 200,160Z');
            innerBell.setAttribute('fill', `url(#${patternId})`);
            innerBell.setAttribute('fill-opacity', '0.5');
            
            // Inner bell ellipse
            const innerEllipse = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');
            innerEllipse.setAttribute('cx', '200');
            innerEllipse.setAttribute('cy', '210');
            innerEllipse.setAttribute('rx', '85');
            innerEllipse.setAttribute('ry', '50');
            innerEllipse.setAttribute('fill', color.main);
            innerEllipse.setAttribute('fill-opacity', '0.3');
            
            // Inner patterns
            const pattern1 = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            pattern1.setAttribute('d', 'M150,210 C170,230 190,240 200,240 C210,240 230,230 250,210');
            pattern1.setAttribute('fill', 'none');
            pattern1.setAttribute('stroke', color.accent);
            pattern1.setAttribute('stroke-width', '1.5');
            pattern1.setAttribute('opacity', '0.7');
            
            const pattern2 = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            pattern2.setAttribute('d', 'M160,200 C175,215 190,225 200,225 C210,225 225,215 240,200');
            pattern2.setAttribute('fill', 'none');
            pattern2.setAttribute('stroke', color.accent);
            pattern2.setAttribute('stroke-width', '1.5');
            pattern2.setAttribute('opacity', '0.7');
            
            const pattern3 = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            pattern3.setAttribute('d', 'M170,190 C180,200 190,210 200,210 C210,210 220,200 230,190');
            pattern3.setAttribute('fill', 'none');
            pattern3.setAttribute('stroke', color.accent);
            pattern3.setAttribute('stroke-width', '1.5');
            pattern3.setAttribute('opacity', '0.7');
            
            bodyGroup.appendChild(bell);
            bodyGroup.appendChild(innerBell);
            bodyGroup.appendChild(innerEllipse);
            bodyGroup.appendChild(pattern1);
            bodyGroup.appendChild(pattern2);
            bodyGroup.appendChild(pattern3);
            
            // Central organs
            const organs = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            const centralPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            centralPath.setAttribute('d', 'M190,210 Q200,250 210,210');
            centralPath.setAttribute('fill', shadeColor(color.main, -20));
            centralPath.setAttribute('opacity', '0.6');
            
            const organ1 = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            organ1.setAttribute('cx', '185');
            organ1.setAttribute('cy', '220');
            organ1.setAttribute('r', '3');
            organ1.setAttribute('fill', shadeColor(color.main, -30));
            
            const organ2 = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            organ2.setAttribute('cx', '195');
            organ2.setAttribute('cy', '225');
            organ2.setAttribute('r', '4');
            organ2.setAttribute('fill', shadeColor(color.main, -30));
            
            const organ3 = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            organ3.setAttribute('cx', '205');
            organ3.setAttribute('cy', '225');
            organ3.setAttribute('r', '4');
            organ3.setAttribute('fill', shadeColor(color.main, -30));
            
            const organ4 = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            organ4.setAttribute('cx', '215');
            organ4.setAttribute('cy', '220');
            organ4.setAttribute('r', '3');
            organ4.setAttribute('fill', shadeColor(color.main, -30));
            
            organs.appendChild(centralPath);
            organs.appendChild(organ1);
            organs.appendChild(organ2);
            organs.appendChild(organ3);
            organs.appendChild(organ4);
            
            // Tentacles
            const tentacles = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            tentacles.setAttribute('opacity', '0.9');
            
            // Long primary tentacles
            const tentacleData = [
                { path: 'M130,330 C140,360 120,390 130,420 C140,450 120,480 130,500', width: 3 },
                { path: 'M150,340 C160,380 140,420 160,460 C170,480 160,490 165,500', width: 4 },
                { path: 'M170,350 C180,390 165,430 180,470 C185,485 180,490 185,500', width: 3.5 },
                { path: 'M190,355 C200,395 185,435 195,475 C198,485 195,490 197,500', width: 3 },
                { path: 'M210,355 C205,395 220,435 210,475 C207,485 209,490 208,500', width: 3 },
                { path: 'M230,350 C225,390 240,430 225,470 C220,485 225,490 220,500', width: 3.5 },
                { path: 'M250,340 C240,380 260,420 240,460 C235,480 245,490 240,500', width: 4 },
                { path: 'M270,330 C260,360 280,390 270,420 C260,450 280,480 270,500', width: 3 }
            ];
            
            tentacleData.forEach(data => {
                const tentacle = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                tentacle.setAttribute('d', data.path);
                tentacle.setAttribute('fill', 'none');
                tentacle.setAttribute('stroke', color.accent);
                tentacle.setAttribute('stroke-width', data.width);
                tentacle.setAttribute('stroke-linecap', 'round');
                tentacles.appendChild(tentacle);
            });
            
            // Shorter fringe tentacles
            const fringeTentacleData = [
                { path: 'M120,320 C115,335 125,350 120,365' },
                { path: 'M140,335 C135,350 145,365 140,380' },
                { path: 'M160,345 C155,360 165,375 160,390' },
                { path: 'M180,350 C175,365 185,380 180,395' },
                { path: 'M200,352 C195,367 205,382 200,397' },
                { path: 'M220,350 C215,365 225,380 220,395' },
                { path: 'M240,345 C235,360 245,375 240,390' },
                { path: 'M260,335 C255,350 265,365 260,380' },
                { path: 'M280,320 C275,335 285,350 280,365' }
            ];
            
            fringeTentacleData.forEach(data => {
                const fringeTentacle = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                fringeTentacle.setAttribute('d', data.path);
                fringeTentacle.setAttribute('fill', 'none');
                fringeTentacle.setAttribute('stroke', color.accent);
                fringeTentacle.setAttribute('stroke-width', '2');
                fringeTentacle.setAttribute('stroke-linecap', 'round');
                tentacles.appendChild(fringeTentacle);
            });
            
            // Glow highlights
            const highlights = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            highlights.setAttribute('opacity', '0.4');
            
            const glowCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            glowCircle.setAttribute('cx', '200');
            glowCircle.setAttribute('cy', '200');
            glowCircle.setAttribute('r', '70');
            glowCircle.setAttribute('fill', 'white');
            glowCircle.setAttribute('filter', `url(#${filter.id})`);
            
            const glowEllipse = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');
            glowEllipse.setAttribute('cx', '200');
            glowEllipse.setAttribute('cy', '210');
            glowEllipse.setAttribute('rx', '40');
            glowEllipse.setAttribute('ry', '25');
            glowEllipse.setAttribute('fill', '#f8f8ff');
            glowEllipse.setAttribute('opacity', '0.6');
            
            highlights.appendChild(glowCircle);
            highlights.appendChild(glowEllipse);
            
            // Add everything to the jellyfish SVG
            jellyfish.appendChild(bodyGroup);
            jellyfish.appendChild(organs);
            jellyfish.appendChild(tentacles);
            jellyfish.appendChild(highlights);
            
            return jellyfish;
        }
        
        // Helper function to shade colors
        function shadeColor(color, percent) {
            let R = parseInt(color.substring(1, 3), 16);
            let G = parseInt(color.substring(3, 5), 16);
            let B = parseInt(color.substring(5, 7), 16);
            
            R = parseInt(R * (100 + percent) / 100);
            G = parseInt(G * (100 + percent) / 100);
            B = parseInt(B * (100 + percent) / 100);
            
            R = (R < 255) ? R : 255;
            G = (G < 255) ? G : 255;
            B = (B < 255) ? B : 255;
            
            R = (R > 0) ? R : 0;
            G = (G > 0) ? G : 0;
            B = (B > 0) ? B : 0;
            
            const RR = ((R.toString(16).length === 1) ? "0" + R.toString(16) : R.toString(16));
            const GG = ((G.toString(16).length === 1) ? "0" + G.toString(16) : G.toString(16));
            const BB = ((B.toString(16).length === 1) ? "0" + B.toString(16) : B.toString(16));
            
            return "#" + RR + GG + BB;
        }
        
        // Add jellyfish to the ocean
        function addJellyfish(count = 1) {
            for (let i = 0; i < count; i++) {
                const colorIndex = Math.floor(Math.random() * jellyfishColors.length);
                const size = 100 + Math.random() * 150;
                const jellyfish = createJellyfish(jellyfishColors[colorIndex], size);
                
                const left = Math.random() * (window.innerWidth - size);
                const top = Math.random() * (window.innerHeight - size);
                
                jellyfish.style.left = `${left}px`;
                jellyfish.style.top = `${top}px`;
                
                // Apply random animation delay
                const animDelay = Math.random() * 5;
                jellyfish.style.animationDelay = `-${animDelay}s`;
                
                // Add to ocean
                ocean.appendChild(jellyfish);
                
                // Animate jellyfish
                animateJellyfish(jellyfish);
            }
        }
        
        // Animate a jellyfish
        function animateJellyfish(jellyfish) {
            const speed = 0.5 + Math.random() * 0.5;
            const startX = parseFloat(jellyfish.style.left);
            const startY = parseFloat(jellyfish.style.top);
            const size = parseFloat(jellyfish.getAttribute('width'));
            
            let time = 0;
            
            function update() {
                time += 0.01;
                
                // Bobbing movement
                const offsetY = Math.sin(time * speed) * 15;
                const offsetX = Math.sin(time * speed * 0.7) * 10;
                
                // Slow upward drift
                const drift = time * 0.3;
                
                // Update position
                const newY = startY - drift + offsetY;
                const newX = startX + offsetX;
                
                // Apply transform
                jellyfish.style.transform = `translate(${offsetX}px, ${offsetY - drift}px)`;
                
                // Reset position if jellyfish goes off screen
                if (newY < -size * 1.5) {
                    jellyfish.style.top = `${window.innerHeight}px`;
                    jellyfish.style.left = `${Math.random() * (window.innerWidth - size)}px`;
                    time = 0;
                }
                
                // Continue animation
                requestAnimationFrame(update);
            }
            
            update();
        }
        
        // Create bubble element
        function createBubble() {
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            // Random size
            const size = 3 + Math.random() * 15;
            bubble.style.width = `${size}px`;
            bubble.style.height = `${size}px`;
            
            // Random position
            const left = Math.random() * window.innerWidth;
            const top = window.innerHeight + size;
            
            bubble.style.left = `${left}px`;
            bubble.style.top = `${top}px`;
            
            // Add to ocean
            ocean.appendChild(bubble);
            
            // Animate bubble
            animateBubble(bubble, size);
            
            return bubble;
        }
        
        // Animate a bubble
        function animateBubble(bubble, size) {
            const speed = 0.5 + Math.random() * 1.5;
            const wobbleSpeed = 0.5 + Math.random() * 2;
            const startX = parseFloat(bubble.style.left);
            const startY = parseFloat(bubble.style.top);
            const amplitude = 5 + Math.random() * 20;
            
            let time = 0;
            
            function update() {
                time += 0.01;
                
                // Wobble movement
                const offsetX = Math.sin(time * wobbleSpeed) * amplitude;
                
                // Upward movement
                const offsetY = -time * speed * 50;
                
                // Update position
                const newY = startY + offsetY;
                const newX = startX + offsetX;
                
                // Apply transform
                bubble.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
                
                // Remove bubble when it goes off screen
                if (newY < -size) {
                    bubble.remove();
                } else {
                    // Continue animation
                    requestAnimationFrame(update);
                }
            }
            
            update();
        }
        
        // Create multiple bubbles
        function createBubbles(count = 10) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    createBubble();
                }, Math.random() * 2000);
            }
        }
        
        // Create seaweed element
        function createSeaweed() {
            const seaweed = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            seaweed.setAttribute('viewBox', '0 0 100 300');
            seaweed.setAttribute('width', '40');
            seaweed.setAttribute('height', '120');
            seaweed.classList.add('seaweed');
            
            // Random position
            const left = Math.random() * window.innerWidth;
            seaweed.style.left = `${left}px`;
            
            // Random color
            const color = `rgb(${50 + Math.random() * 50}, ${150 + Math.random() * 50}, ${50 + Math.random() * 50})`;
            
            // Create seaweed shape
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('d', 'M50,300 C30,250 70,200 50,150 C30,100 70,50 50,0');
            path.setAttribute('fill', 'none');
            path.setAttribute('stroke', color);
            path.setAttribute('stroke-width', '12');
            path.setAttribute('stroke-linecap', 'round');
            
            seaweed.appendChild(path);
            
            // Add to ocean
            ocean.appendChild(seaweed);
            
            // Animate seaweed
            animateSeaweed(seaweed);
            
            return seaweed;
        }
        
        // Animate seaweed
        function animateSeaweed(seaweed) {
            const speed = 0.5 + Math.random() * 0.5;
            const amplitude = 5 + Math.random() * 5;
            
            let time = Math.random() * 10;
            
            function update() {
                time += 0.01;
                
                // Swaying movement
                const rotation = Math.sin(time * speed) * amplitude;
                
                // Apply transform
                seaweed.style.transform = `rotate(${rotation}deg)`;
                
                // Continue animation
                requestAnimationFrame(update);
            }
            
            update();
        }
        
        // Create fish element
        function createFish() {
            const fish = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            fish.setAttribute('viewBox', '0 0 100 50');
            fish.setAttribute('width', '40');
            fish.setAttribute('height', '20');
            fish.classList.add('fish');
            
            // Random position
            const left = -50;
            const top = 100 + Math.random() * (window.innerHeight - 200);
            
            fish.style.left = `${left}px`;
            fish.style.top = `${top}px`;
            
            // Random color
            const hue = Math.floor(Math.random() * 360);
            const color = `hsl(${hue}, 80%, 60%)`;
            const accentColor = `hsl(${hue}, 80%, 40%)`;
            
            // Create fish shape
            const body = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            body.setAttribute('d', 'M20,25 C35,10 65,10 80,25 L95,15 L95,35 L80,25 C65,40 35,40 20,25 L5,35 L5,15 L20,25');
            body.setAttribute('fill', color);
            body.setAttribute('stroke', accentColor);
            body.setAttribute('stroke-width', '1');
            
            const eye = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            eye.setAttribute('cx', '75');
            eye.setAttribute('cy', '22');
            eye.setAttribute('r', '3');
            eye.setAttribute('fill', 'white');
            
            const pupil = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            pupil.setAttribute('cx', '76');
            pupil.setAttribute('cy', '22');
            pupil.setAttribute('r', '1.5');
            pupil.setAttribute('fill', 'black');
            
            fish.appendChild(body);
            fish.appendChild(eye);
            fish.appendChild(pupil);
            
            // Add to ocean
            ocean.appendChild(fish);
            
            // Animate fish
            animateFish(fish);
            
            return fish;
        }
        
        // Animate fish
        function animateFish(fish) {
            const speed = 0.5 + Math.random() * 1.5;
            const wobbleSpeed = 1 + Math.random() * 2;
            const startY = parseFloat(fish.style.top);
            const amplitude = 5 + Math.random() * 10;
            
            let time = 0;
            
            function update() {
                time += 0.01;
                
                // Wobble movement
                const offsetY = Math.sin(time * wobbleSpeed) * amplitude;
                
                // Forward movement
                const offsetX = time * speed * 30;
                
                // Update position
                const newX = -50 + offsetX;
                
                // Apply transform
                fish.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
                
                // Remove fish when it goes off screen
                if (newX > window.innerWidth + 50) {
                    fish.remove();
                    // Create a new fish after a delay
                    setTimeout(createFish, Math.random() * 5000);
                } else {
                    // Continue animation
                    requestAnimationFrame(update);
                }
            }
            
            update();
        }
        
        // Initialize the ocean scene
        function initScene() {
            // Create light rays
            createLightRays();
            
            // Create initial jellyfish
            addJellyfish(config.jellyfishCount);
            
            // Create seaweed along the bottom
            for (let i = 0; i < config.seaweedCount; i++) {
                createSeaweed();
            }
            
            // Start bubble generation
            const bubbleInterval = setInterval(() => {
                createBubble();
            }, 1000);
            
            // Create initial bubbles
            createBubbles(config.bubbleCount);
            
            // Create fish occasionally
            for (let i = 0; i < config.fishCount; i++) {
                setTimeout(createFish, Math.random() * 10000);
            }
            
            // Add event listeners for controls
            document.getElementById('add-jellyfish').addEventListener('click', () => {
                addJellyfish(1);
            });
            
            document.getElementById('add-bubbles').addEventListener('click', () => {
                createBubbles(20);
            });
            
            // Handle window resize
            window.addEventListener('resize', () => {
                // Reset positions if needed
            });
        }
        
        // Start the scene
        initScene();
    </script>
</body>
</html>