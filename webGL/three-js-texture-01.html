<!--
---
title: "Three JS Texture 01"
date: 2025-05-02
categories: ["webgl"]
tags: ["background"]
---
-->

<!-- Basic HTML structure with DOCTYPE declaration -->
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Three.js Texture</title>
		<link rel="stylesheet" href="../style.css">
		<meta charset="utf-8"> <!-- Character encoding for the document -->
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"> <!-- Responsive design settings -->
		<!-- Add Prism.js for syntax highlighting -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
		<style>

		</style>
	</head>
	<body class="webgl-background">

		<!-- Container for the WebGL content -->
		<div id="webgl-container"></div>

		<!-- Add a content container for any text content -->
		<main>
			<div class="content-container">
				<h1>Three.js Texture Animation</h1>
				<p>This page demonstrates a WebGL background using Three.js with custom shaders. The animation creates a dynamic, colorful pattern that responds to time.</p>
				<p>The page uses the <code>webgl-background</code> class to ensure the header and navigation remain visible while allowing the animation to show through.</p>
                
                <h2>About This Demo</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.</p>
                
                <h3>How It Works</h3>
                <p>Vestibulum auctor dapibus neque. Maecenas sed nisi in mi congue tincidunt. Praesent sapien massa, convallis a pellentesque nec, egestas non nisi. Nulla quis sem at nibh elementum imperdiet.</p>
                
                <h3>Technical Details</h3>
                <p>Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
                
                <h2>Implementation</h2>
                <p>Curabitur sodales ligula in libero. Sed dignissim lacinia nunc. Curabitur tortor. Pellentesque nibh. Aenean quam. In scelerisque sem at dolor. Maecenas mattis. Sed convallis tristique sem. Proin ut ligula vel nunc egestas porttitor.</p>
                
                <p>Morbi lectus risus, iaculis vel, suscipit quis, luctus non, massa. Fusce ac turpis quis ligula lacinia aliquet. Mauris ipsum. Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in, nibh. Quisque volutpat condimentum velit.</p>
                
                <h2>Conclusion</h2>
                <p>Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nam nec ante. Sed lacinia, urna non tincidunt mattis, tortor neque adipiscing diam, a cursus ipsum ante quis turpis. Nulla facilisi. Ut fringilla. Suspendisse potenti.</p>
                
                <p>Nunc feugiat mi a tellus consequat imperdiet. Vestibulum sapien. Proin quam. Etiam ultrices. Suspendisse in justo eu magna luctus suscipit. Sed lectus. Integer euismod lacus luctus magna.</p>
                
                <h2>Final Thoughts</h2>
                <p>Quisque cursus, metus vitae pharetra auctor, sem massa mattis sem, at interdum magna augue eget diam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi lacinia molestie dui. Praesent blandit dolor.</p>
                
                <p>Pellentesque egestas, neque sit amet convallis pulvinar, justo nulla eleifend augue, ac auctor orci leo non est. Quisque id mi. Ut tincidunt tincidunt erat. Etiam feugiat lorem non metus. Vestibulum dapibus nunc ac augue.</p>
                
                <p>Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices enim. Curabitur sit amet mauris. Morbi in dui quis est pulvinar ullamcorper. Nulla facilisi. Integer lacinia sollicitudin massa.</p>
                
                <h2>Additional Information</h2>
                <p>Cras metus. Sed aliquet risus a tortor. Integer id quam. Morbi mi. Quisque nisl felis, venenatis tristique, dignissim in, ultrices sit amet, augue. Proin sodales libero eget ante.</p>
                
                <p>Nulla quam. Aenean laoreet. Vestibulum nisi lectus, commodo ac, facilisis ac, ultricies eu, pede. Ut orci risus, accumsan porttitor, cursus quis, aliquet eget, justo. Sed pretium blandit orci.</p>
                
                <p>Ut eu diam at pede suscipit sodales. Aenean lectus elit, fermentum non, convallis id, sagittis at, neque. Nullam mauris orci, aliquet et, iaculis et, viverra vitae, ligula.</p>
			</div>
		</main>

		<!-- Vertex shader script -->
		<script id="vertexShader" type="x-shader/x-vertex" class="language-glsl">
			// Declare varying variable for UV coordinates
			varying vec2 vUv;

			/* 
			 * Main function of the vertex shader
			 * This function is called for each vertex in the geometry
			 */
			void main() {

				/* 
				 * Pass UV coordinates to fragment shader
				 * The UV coordinates are used to determine the texture coordinates
				 */
				vUv = uv;

				/* 
				 * Set the position of the vertex
				 * The position is a 4-component vector (x, y, z, w)
				 * where w is the homogeneous coordinate
				 */
				gl_Position = vec4( position, 1.0 );

			}
		</script>

		<!-- Fragment shader script -->
		<script id="fragmentShader" type="x-shader/x-fragment" class="language-glsl">
			// Receive UV coordinates from vertex shader
			varying vec2 vUv;

			/* 
			 * Uniform variable for animation timing
			 * This variable is updated by the JavaScript code
			 */
			uniform float time;

			/* 
			 * Main function of the fragment shader
			 * This function is called for each pixel in the geometry
			 */
			void main() {

				/* 
				 * Calculate the position of the pixel in the 2D space
				 * The position is a 2-component vector (x, y)
				 */
				vec2 p = - 1.0 + 2.0 * vUv;

				/* 
				 * Calculate the animation timing
				 * The animation timing is used to animate the pattern
				 */
				float a = time * 40.0;

				/* 
				 * Calculate the distance and other variables
				 * These variables are used to calculate the final color
				 */
				float d, e, f, g = 1.0 / 40.0 ,h ,i ,r ,q;

				/* 
				 * Calculate the x and y coordinates of the pixel
				 * These coordinates are used to calculate the final color
				 */
				e = 400.0 * ( p.x * 0.5 + 0.5 );
				f = 400.0 * ( p.y * 0.5 + 0.5 );

				/* 
				 * Calculate the final color of the pixel
				 * The final color is a 3-component vector (r, g, b)
				 */
				i = 200.0 + sin( e * g + a / 150.0 ) * 20.0;
				d = 200.0 + cos( f * g / 2.0 ) * 18.0 + cos( e * g ) * 7.0;
				r = sqrt( pow( abs( i - e ), 2.0 ) + pow( abs( d - f ), 2.0 ) );
				q = f / r;
				e = ( r * cos( q ) ) - a / 2.0;
				f = ( r * sin( q ) ) - a / 2.0;
				d = sin( e * g ) * 176.0 + sin( e * g ) * 164.0 + r;
				h = ( ( f + d ) + a / 2.0 ) * g;
				i = cos( h + r * p.x / 1.3 ) * ( e + e + a ) + cos( q * g * 6.0 ) * ( r + h / 3.0 );
				h = sin( f * g ) * 144.0 - sin( e * g ) * 212.0 * p.x;
				h = ( h + ( f - e ) * q + sin( r - ( a + h ) / 7.0 ) * 10.0 + i / 4.0 ) * g;
				i += cos( h * 2.3 * sin( a / 350.0 - q ) ) * 184.0 * sin( q - ( r * 4.3 + a / 12.0 ) * g ) + tan( r * g + h ) * 184.0 * cos( r * g + h );
				i = mod( i / 5.6, 256.0 ) / 64.0;
				if ( i < 0.0 ) i += 4.0;
				if ( i >= 2.0 ) i = 4.0 - i;
				d = r / 350.0;
				d += sin( d * d * 8.0 ) * 0.52;
				f = ( sin( a * g ) + 1.0 ) / 2.0;

				/* 
				 * Set the final color of the pixel
				 * The final color is a 4-component vector (r, g, b, a)
				 * where a is the alpha channel
				 */
				gl_FragColor = vec4( vec3( f * i / 1.6, i / 2.0 + d / 13.0, i ) * d * p.x + vec3( i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i ) * d * ( 1.0 - p.x ), 1.0 );

			}

		</script>

		<!-- Import map for three.js library -->
		<script type="importmap">
			{
				"imports": {
					"three": "https://unpkg.com/three@0.145.0/build/three.module.js",
					"three/addons/": "https://unpkg.com/three@0.145.0/examples/jsm/"
				}
			}
		</script>

		<!-- JavaScript code for the WebGL application -->
		<script type="module" class="language-javascript">
			// Import three.js library
			import * as THREE from 'three';

			// Global variables for the application
			let camera, scene, renderer;

			// Uniform variables for the shaders
			let uniforms;

			// Initialize the application
			init();

			/* 
			 * Initialize the application
			 * This function sets up the camera, scene, and renderer
			 */
			function init() {

				// Get the container for the WebGL content
				const container = document.getElementById('webgl-container');

				// Create the camera
				camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );

				// Create the scene
				scene = new THREE.Scene();

				// Create the geometry for the plane
				const geometry = new THREE.PlaneGeometry( 2, 2 );

				// Create the uniform variables for the shaders
				uniforms = {
					time: { value: 1.0 }
				};

				// Create the material for the plane
				const material = new THREE.ShaderMaterial( {

					// Set the uniforms for the material
					uniforms: uniforms,

					// Set the vertex shader for the material
					vertexShader: document.getElementById( 'vertexShader' ).textContent,

					// Set the fragment shader for the material
					fragmentShader: document.getElementById( 'fragmentShader' ).textContent

				} );

				// Create the mesh for the plane
				const mesh = new THREE.Mesh( geometry, material );

				// Add the mesh to the scene
				scene.add( mesh );

				// Create the renderer
				renderer = new THREE.WebGLRenderer();

				// Set the pixel ratio for the renderer
				renderer.setPixelRatio( window.devicePixelRatio );

				// Set the size of the renderer
				renderer.setSize( window.innerWidth, window.innerHeight );

				// Set the animation loop for the renderer
				renderer.setAnimationLoop( animate );

				// Add the renderer to the container
				container.appendChild( renderer.domElement );

				// Add event listener for window resize
				window.addEventListener( 'resize', onWindowResize );

			}

			/* 
			 * Handle window resize event
			 * This function updates the size of the renderer
			 */
			function onWindowResize() {

				// Update the size of the renderer
				renderer.setSize( window.innerWidth, window.innerHeight );
				
				// Update resolution uniform if it exists
				if (uniforms.resolution) {
					uniforms.resolution.value.x = window.innerWidth * renderer.getPixelRatio();
					uniforms.resolution.value.y = window.innerHeight * renderer.getPixelRatio();
				}
				
				// For mobile, handle address bar hiding/showing
				const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
				if (isMobile) {
					// Add extra height on mobile to prevent gaps when address bar hides
					const mobileHeight = window.innerHeight * 1.15;
					renderer.domElement.style.height = mobileHeight + 'px';
				}
				
				// Update camera aspect ratio if needed
				if (camera.isOrthographicCamera) {
					// For orthographic camera, no aspect ratio update needed
				} else if (camera.isPerspectiveCamera) {
					camera.aspect = window.innerWidth / window.innerHeight;
					camera.updateProjectionMatrix();
				}
				
				// Force a render to update the display immediately
				renderer.render(scene, camera);
			}

			/* 
			 * Animation loop function
			 * This function updates the uniforms and renders the scene
			 */
			function animate() {

				// Update the time uniform
				uniforms[ 'time' ].value = performance.now() / 1000;

				// Render the scene
				renderer.render( scene, camera );

			}

		</script>
<script src="../menu.js"></script>
		<!-- Add Prism.js for syntax highlighting -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
	</body>
</html>
